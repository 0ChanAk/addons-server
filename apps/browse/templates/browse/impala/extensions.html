{% extends "browse/impala/base_listing.html" %}

{% if category %}
  {% set url_base = url('i_browse.extensions', category.slug) %}
{% else %}
  {% set url_base = url('i_browse.extensions') %}
{% endif %}

{% set extras = (('name', _('Name')),
                 ('popular', _('Weekly Downloads')),
                 ('updated', _('Recently Updated'))) %}

{% block primary %}
<section class="primary">
  {% if category %}
    {{ impala_breadcrumbs([(url('i_browse.extensions'), _('Extensions')),
                           (None, category.name)]) }}
  {% else %}
    {{ impala_breadcrumbs([(None, _('Extensions'))]) }}
  {% endif %}
  <h1>{{ category.name if category else filter.opts_dict[sorting] }}</h1>
  <div class="island hero c listing">
    <a href="{{ feed_url }}" id="subscribe">{{ _('Subscribe') }}</a>
    {{ impala_addon_listing_header(url_base, sort_opts, sorting, extras) }}
    <div class="items">
      {{ impala_addon_listing_items(addons.object_list, src='category',
                                    show_date=sorting) }}
    </div>
    {% if sorting != 'featured' %}
      {{ addons|impala_paginator }}
    {% endif %}
  </div>
</section>
{% endblock %}
