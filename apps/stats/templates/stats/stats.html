{% extends "base.html" %}

{% block site_css %}
  {{ super() }}
  <link rel="stylesheet" href="{{ MEDIA_URL }}css/stats.css"/>
{% endblock %}

{% block title %}{{ _('Add-ons for Firefox') }} Statistics Dashboard {% endblock %}

{% block navbar %}
  {{ breadcrumbs() }}
  {# TODO: Replace above line with this --> once we serve the extension home. { breadcrumbs([(addon.type.get_url_path(), amo.ADDON_TYPES[addon.type_id])]) } #}


  {% set version = addon.current_version %}
  {% set previews = addon.previews.all() %}

  <div class="criteria range">
    <ul>
      <li>For Last:</li>
      <li class="" data-range="7 days"><a href="#">7 Days</a></li>
      <li data-range="30 days" class="selected"><a href="#">30 Days</a></li>
      <li data-range="90 days"><a href="#">90 Days</a></li>
      <li class="divider"></li>
      <li data-range="custom"><a href="#">Custom</a></li>
    </ul>
  </div>

  <hgroup>
  <h2 class="addon"{{ addon.name|locale_html }}>
    <img src="{{ addon.icon_url }}" class="icon"/>
    <span>
      Statistics for {{ addon.name }}
    </span>
  </h2>
  <h4 class="author">{{ _('by') }} {{ users_list(addon.listed_authors) }}</h4>
  </hgroup>
{% endblock %}

{% block content %}
  <div id="lm" class="loadmessage"><span>Loading the latest data&hellip;</span></div>
  <div class="secondary">
    {{ report_menu(addon, report) }}
    <aside class="highlight">
      Notable Stats and tips will go here.
    </aside>
  </div>
  <div class="primary statistics"
    data-report="{{ report }}"
    data-addon_id="{{ addon.id }}"
    >
    {% if true %}
      <div class="custom criteria hidden">
        <form>
          <label for"date-range-start">From</label>
          <input type="date" id="date-range-start" />
          <label for"date-range-end">To</label>
          <input type="date" id="date-range-end" />
          <label for="date-range-grouping">grouped by</label>
          <select id="date-range-grouping">
            <option >day</option>
            <option >month</option>
            <option >year</option>
          </select>
          <button id="date-range-submit" type="submit">Update</button>
        </form>
<!--         <ul><li>From</li><li class="selected"><a>Control 1</a></li></ul> -->
      </div>
    {% endif %}
    <div class="featured">
      <div class="featured-inner chart">
        <div class="listing-header"><ul><li class="selected">&nbsp;</li></ul></div>
        <div class="featured-body" id="head-chart" style="background:#fff;height:256px"></div>
      </div>
    </div>
    {% block stats %}
    {% endblock %}
    {% block csvtable %}
    {% endblock %}
  </div>
{% endblock %}

{% block js %}
<script>
    (function () {
        var stats_base_url = '{{ stats_base_url }}/';
        AMO.getStatsBaseURL = function () { return stats_base_url };
    })();
</script>
{% block chartconfig %}
{% endblock %}
<script src="{{ MEDIA_URL }}js/zamboni/jquery-datepicker.js"></script>
<script src="{{ MEDIA_URL }}js/zamboni/highcharts.src.js"></script>
<!--[if IE]>
   <script src="{{ MEDIA_URL }}js/excanvas.compiled.js" type="text/javascript"></script>
<![endif]-->
<script src="{{ MEDIA_URL }}js/zamboni/stats.js"></script>
<script src="{{ MEDIA_URL }}js/zamboni/stats_manager.js"></script>
<script src="{{ MEDIA_URL }}js/zamboni/stats_tables.js"></script>
{% endblock %}


