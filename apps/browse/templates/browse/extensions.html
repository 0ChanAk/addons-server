{% extends "base_side_categories.html" %}

{% block title %}
{% if category %}
  {{ page_title(category.name) }}
{% else %}
  {{ page_title(_('Extensions')) }}
{% endif %}
{% endblock %}

{% block extrahead %}
{# This is ripped off from the li.selected styling in main-mozilla.css.  I'm
not excited about CSS in here, but it's the best way to highlight the category
while keeping the sidebar cached. #}
{% if category %}
  <style>
    #c-{{ category.id }} {
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
        border: 1px solid #001133;
        background-color: #223355;
        padding: 0 3px 0 3px;
    }
    #c-{{ category.id }} a {
        color: #fff;
    }
  </style>
{% endif %}
{% endblock %}

{% block content %}
<header>
  {% if category %}
    {{ breadcrumbs([(url('browse.extensions'), _('Extensions'))]) }}
    <hgroup>
    <h2>{{ category.name }}</h2>
  {% else %}
    {{ breadcrumbs() }}
    <hgroup>
    <h2>{{ _('Extensions') }}</h2>
  {% endif %}
  {# L10n: {0} is an integer. #}
  <h3>{{ _('<b>{0}</b> add-ons')|f(addons.paginator.count)|safe }}</h3>
  </hgroup>
</header>

<div class="featured listing">
  <div class="featured-inner">
    {% if category %}
      {% set url_base = url('browse.extensions', category.slug) %}
    {% else %}
      {% set url_base = url('browse.extensions') %}
    {% endif %}
    {{ addon_listing_header(url_base, sort_opts, sorting, experimental) }}
    {{ addon_listing_items(addons.object_list) }}
    <div class="listing-footer">
      {{ addons|paginator }}
    </div>
  </div> {# featured-inner #}
</div>
{% endblock %}
