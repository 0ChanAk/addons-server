{% extends "base.html" %}

{% set titles = {
    'featured': _('Featured Collections'),
    'popular': _('Popular Collections'),
    'rating': _('Highest Rated Collections'),
    'created': _('Recently Added Collections'),
} %}
{% if userpage %}
  {% set base_url = url('collections.user', userpage) %}
{% else %}
  {% set base_url = url('collections.list') %}
{% endif %}

{% block title %}{{ page_title(titles[filter.field]) }}{% endblock %}

{% block extrahead %}{{ category_arrow(filter.field, prefix='p') }}{% endblock %}

{% block content %}
<div class="primary">
  <header>
    {% set crumbs = [(url('collections.list'), _('Collections')),
                     (None, filter.title)] %}
    {% if userpage %}
      {% do crumbs.insert(1, (url('collections.user', userpage), userpage)) %}
    {% endif %}
    {{ breadcrumbs(crumbs) }}
    <h2>{{ titles[filter.field] }}</h2>
  </header>
  <div class="featured listing">
    {{ addon_listing_header(base_url, filter.opts, filter.field,
                            show_unreviewed=False) }}
    <div class="featured-inner">
      {% cache collections.object_list %}
        {{ collection_listing_items(collections.object_list,
                                    show_weekly=filter.field == 'popular') }}
      {% endcache %}
    </div>
    {% if collections.has_other_pages() %}
      <div class="listing-footer">{{ collections|paginator }}</div>
    {% endif %}
  </div>
</div>

<div class="secondary">
  {% include 'bandwagon/includes/collection_sidebar.html' %}

  <div>
    <h3>{{ _('Create a New Collection') }}</h3>
    <p>{% trans %}
      Collections make it easy to keep track of favorite add-ons and share your
      perfectly customized browser with others.
    {% endtrans %}</p>
    <a href="{{ url('collections.add') }}" class="button">
      {{ _('Create a Collection') }}</a>
  </div>

  <div>
    <h3>{{ _('Add-on Collector') }}</h3>
    <p>{% trans app=request.APP.pretty %}
      Get updates on watched collections or manage your own collections directly
      from {{ app }} with this add-on.
    {% endtrans %}</p>
    <a href="{{ remora_url('/pages/collector') }}" class="more-info">
      {{ _('Check out Add-on Collector') }}</a>
  </div>
</div>
{% endblock %}
