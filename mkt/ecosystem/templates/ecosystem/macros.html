{% macro navigation(section) -%}
  <nav id="document-navigation">
    <ul>
      <li class="has-children">
        <div class="section{{ ' active' if category == 'design' }}">
          <h2 class="title nav-title">{{ _('Design') }}</h2>
          <ol>
            <li>
              <a href="{{ url('ecosystem.design_concept') }}"
                 {% if section == 'design_concept' %}
                 class="selected"
                 {% endif %}>
                {{ _('Concept: A great app') }}
              </a>
            </li>
            <li>
              <a href="{{ url('ecosystem.design_fundamentals') }}"
                 {% if section == 'design_fundamentals' %}
                 class="selected"
                 {% endif %}>
                {{ _('Design Fundamentals') }}
              </a>
            </li>
            <li class="has-children{{ ' active' if section in ('design_ui',
                                                               'design_patterns') }}">
              <h2 class="subtitle nav-title">
                <a href="{{ url('ecosystem.design_ui') }}">
                  {{ _('UI Guidelines') }}
                </a>
              </h2>
              <ol>
                <li>
                  <a href="//developer.mozilla.org/docs/Web_Development/Mobile/Responsive_design"
                     rel="external">
                    {{ _('Intro to Responsive Design') }}
                  </a>
                </li>
                <li>
                  <a href="{{ url('ecosystem.design_patterns') }}"
                     {% if section == 'design_patterns' %}
                     class="selected"
                     {% endif %}>
                    {{ _('Responsive Navigation Patterns') }}
                  </a>
                </li>
                <li>
                  <a href="//developer.mozilla.org/en-US/docs/Apps/UI-Guidelines"
                     rel="external">
                    {{ _('UI Guidelines for Firefox OS') }}
                  </a>
                </li>
              </ol>
            </li>
          </ol>
        </div>
        <div class="section{{ ' active' if category == 'build' }}">
          <h2 class="title nav-title">{{ _('Build') }}</h2>
          <ol>
            <li>
              <a href="{{ url('ecosystem.documentation', page='html5') }}"
                {% if section == 'html5' %}class="selected"{% endif %}>
                {{ _('Web app Foundations') }}
              </a>
            </li>
            <li>
              <a href="{{ url('ecosystem.documentation',
                 page='firefox_os') }}"
                 {% if section == 'firefox_os' %}class="selected"{% endif %}>
                {{ _('Firefox OS') }}
              </a>
            </li>
            <li class="has-children{{ ' active' if section in ('chrono',
                                                               'face_value',
                                                               'roller') }}">
              <h2 class="subtitle nav-title">{{ _('Reference Apps') }}</h2>
              <ol>
                <li>
                  <a href="{{ url('ecosystem.apps_documentation',
                     page='chrono') }}"
                     {% if section == 'chrono' %}class="selected"{% endif %}>
                    {{ _('Chrono') }}
                  </a>
                </li>
                <li>
                  <a href="{{ url('ecosystem.apps_documentation',
                     page='face_value') }}"
                     {% if section == 'face_value' %}class="selected"{% endif %}>
                    {{ _('Face Value') }}
                  </a>
                </li>
                <li>
                  <a href="{{ url('ecosystem.apps_documentation',
                     page='roller') }}"
                     {% if section == 'roller' %}class="selected"{% endif %}>
                    {{ _('Roller') }}
                  </a>
                </li>
              </ol>
            </li>
            <li class="has-children{{ ' active' if section in ('app_generator',
                                                               'firefox_os_simulator',
                                                               'devtools',
                                                               'support') }}">
              <h2 class="subtitle nav-title">{{ _('Tools &amp; Downloads') }}</h2>
              <ol>
                <li>
                  <a href="{{ url('ecosystem.app_generator_documentation') }}"
                     {% if section == 'app_generator' -%}
                     class="selected"
                     {% endif -%}>
                    {{ _('App Generator') -}}
                  </a>
                </li>
                <li>
                  <a href="{{ url('mkt.developers.validate_addon') }}"
                     rel="external">
                    {{ _('App Validator') -}}
                  </a>
                </li>
                <li>
                  <a href="{{ url('ecosystem.firefox_os_simulator') }}"
                     {% if section == 'firefox_os_simulator' -%}
                     class="selected"
                     {% endif -%}>
                    {{ _('Firefox OS Simulator') -}}
                  </a>
                </li>
                <li>
                  <a href="{{ url('ecosystem.documentation', page='devtools') }}"
                     {% if section == 'devtools' %}class="selected"{% endif %}>
                    {{ _('Dev Tools') -}}
                  </a>
                </li>
                <li>
                  <a href="{{ url('ecosystem.support') }}"
                     {% if section == 'support' %}class="selected"{% endif %}>
                    {{ _('Support') -}}
                  </a>
                </li>
              </ol>
            </li>
            <li class="has-children{{ ' active' if section in ('manifests',
                                                               'manifest_faq',
                                                               'templates',
                                                               'using_firefox_os_simulator') }}">
              <h2 class="subtitle nav-title">{{ _('Docs &amp; APIs') }}</h2>
              <ol>
                <li>
                  <a href="{{ url('ecosystem.documentation', page='manifests') }}"
                     {% if section == 'manifests' %}class="selected"{% endif %}>
                    {{ _('Manifests') }}
                  </a>
                </li>
                <li>
                  <a href="{{ url('ecosystem.documentation', page='manifest_faq') }}"
                     {% if section == 'manifest_faq' %}class="selected"{% endif %}>
                    {{ _('Manifest FAQ') }}
                  </a>
                </li>
                <li>
                  <a href="{{ url('ecosystem.documentation', page='templates') }}"
                     {% if section == 'templates' %}class="selected"{% endif %}>
                    {{ _('Using App Templates') }}
                  </a>
                </li>
                <li>
                  <a href="{{ url('ecosystem.documentation',
                     page='using_firefox_os_simulator') }}"
                     {% if section == 'using_firefox_os_simulator' -%}
                     class="selected"
                     {% endif -%}>
                    {{ _('Using Firefox OS Simulator') -}}
                  </a>
                </li>
              </ol>
            </li>
          </ol>
        </div>
        <div class="section{{ ' active' if category == 'publish' }}">
          <h2 class="title nav-title">{{ _('Publish') }}</h2>
          <ol>
            <li>
              <a href="{{ url('ecosystem.documentation',
                 page='mkt_hosting') }}"
                 {% if section == 'mkt_hosting' -%}
                 class="selected"
                 {% endif -%}>
                {{ _('Hosting') }}
              </a>
            </li>
            <li>
              <a href="{{ url('ecosystem.documentation',
                 page='packaged_apps') }}"
                 {% if section == 'packaged_apps' -%}
                 class="selected"
                 {% endif -%}>
                {{ _('Packaged Apps') }}
              </a>
            </li>
            <li>
              <a href="{{ url('ecosystem.documentation',
                 page='mkt_submission') }}"
                 {% if section == 'mkt_submission' -%}
                 class="selected"{% endif -%}>
                {{ _('Marketplace Submission') }}
              </a>
            </li>
            <li>
              <a href="{{ url('submit.app') }}"
                 rel="external">
                {{ _('Submit an App') -}}
              </a>
            </li>
            <li class="has-children">
              <h2 class="subtitle nav-title">{{ _('Docs &amp; APIs') }}</h2>
              <ol>
                <li>
                  <a href="http://zamboni.readthedocs.org/en/latest/topics/api.html"
                     rel="external">
                    {{ _('Marketplace API') -}}
                  </a>
                </li>
              </ol>
            </li>
          </ol>
        </div>
      </li>
    </ul>
  </nav>
{% endmacro -%}

{% macro video_display(video_name, video_path, video_width=509,
                       video_height=278) -%}
  <div class="{{ video_name }}-content video-item" id="{{ video_name }}">
    <div class="video-control">
      <video width="{{ video_width }}" height="{{ video_height }}"
        poster="{{ media('img/ecosystem/poster-%s.jpg' % video_name) }}"
        controls="controls">
        <source src="//videos-cdn.mozilla.net/serv/Marketplace-videos/{{ video_path }}.webm" type="video/webm">
        <source src="//videos-cdn.mozilla.net/serv/Marketplace-videos/{{ video_path }}.mp4" type="video/mp4">
        {# TODO: Get a version of playerWithControls.swf on the video CDN for addons #}
        <!--
        <object type="application/x-shockwave-flash"
                style="width: 528px; height: 317px;"
                data="//videos-cdn.mozilla.net/addons/playerWithControls.swf?flv=serv/drafts/{{ video_name }}.mp4&amp;autoplay=false&amp;msg=Play%20Video">
          <param name="movie" value="//videos-cdn.mozilla.net/addons/playerWithControls.swf?flv=serv/drafts/{{ video_name }}.mp4&amp;autoplay=false&amp;msg=Play%20Video">
          <param name="wmode" value="transparent">
          <div class="video-player-no-flash">
            This video requires a browser with support for open video or the
            <a href="http://www.adobe.com/go/getflashplayer">
              Adobe Flash Player
            </a>.
          </div>
        </object>
        -->
      </video>
    </div>
    {# TODO: Get updated subtitle IDs for the new videos when available #}
    <!--
    <div class="subtitles">
      <a href="http://www.universalsubtitles.org/videos/{{ translation_id }}/info/">
        {{ _('View with subtitles') }}
      </a>
    </div>
    -->
  </div>
{% endmacro -%}

{% macro third_party_lib(name) -%}
  <h3>
    <a href="{{ third_party_libs[name].link }}" rel="external"
       target="_blank">{{ third_party_libs[name].title }}</a>
  </h3>
{% endmacro -%}

{% macro web_api(name) -%}
  <h3>
    <a href="{{ web_api_libs[name].link }}">
      {{ web_api_libs[name].title }}</a>
  </h3>
{% endmacro -%}

{% macro custom_elements(name) -%}
  <h3>
    <a href="{{ custom_elements_libs[name].link }}">
      {{ custom_elements_libs[name].title }}</a>
  </h3>
{% endmacro -%}
