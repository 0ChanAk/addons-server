{% extends "impala/base.html" %}

{% block title %}{{ page_title(_('User Login')) }}{% endblock %}

{% block bodyclass %}login{% endblock %}

{% block js %}
  {% if waffle.switch('browserid-login') %}
    <script src="https://browserid.org/include.js"></script>
  {% endif %}
  {% if form.recaptcha %}
    {% include("amo/recaptcha_js.html") %}
  {% endif %}
{{ js('zamboni/login') }}
{% endblock %}

{% block content %}

<div class="primary">
  {% include "messages.html" %}
  {% if form.non_field_errors() %}
      <div class="notification-box error">
        <ul>
        {% for error in form.non_field_errors() %}
          <h2>{{ error }}</h2>
        {% endfor %}
        </ul>
      </div>
  {% endif %}
  <div class="secondary">
      <div id="login-help" class="article">
          <h2>{{ _('Login Problems?') }}</h2>
          <ul>
              <li><a href="{{ url('users.register') }}">{{ _("I don't have an account.") }} </a></li>
              <li><a href="{{ url('users.pwreset') }}">{{ _("I forgot my password.") }}</a></li>
          </ul>
      </div>
  </div>
  <section class="island hero primary prettyform grid">
    <h1>{{ _('Log In') }}</h1>
    {% if waffle.switch('browserid-login') %}
      <button class="browserid-login" type="submit"
              data-url="{{ url('users.browserid_login') }}">
        {{ _('Log in with BrowserID') }}
      </button>
    </div>
    {% endif %}
    <form method="post" action="">
      {{ csrf() }}
      <fieldset>
        <ul>
          <li>
            <label for="id_username">{{ _('Email address') }}</label>
            {{ form.username }}
            {{ form.username.errors }}
          </li>
          <li>
            <label for="id_password">{{ _('Password') }}</label>
            {{ form.password }}
            {{ form.password.errors }}
          </li>
          <li>
            <label for="id_rememberme" class="check">
              {{ form.rememberme }}
              {{ _('Remember me on this computer') }}
            </label>
            {{ form.rememberme.errors }}
          </li>
          {% if form.recaptcha %}
            {{ form.recaptcha_shown }}
            {{ recaptcha(form) }}
          {% endif %}
          <button id="login-submit" type="submit">{{ _('Log in') }}</button>
        </ul>
      </fieldset>
    </form>
  </section>
</div>
{% endblock content %}
