{% extends "base.html" %}

{% set titles = {
    'featured': _('Featured Collections'),
    'popular': _('Popular Collections'),
    'rating': _('Highest Rated Collections'),
    'created': _('Recently Added Collections'),
} %}
{% if userpage %}
  {% set base_url = url('collections.user', userpage) %}
{% else %}
  {% set base_url = url('collections.list') %}
{% endif %}

{% block title %}{{ page_title(titles[filter.field]) }}{% endblock %}

{% block extrahead %}{{ category_arrow(filter.field, prefix='p') }}{% endblock %}

{% block content %}
<div class="primary">
  <header>
    {% set crumbs = [(url('collections.list'), _('Collections')),
                     (None, filter.title)] %}
    {% if userpage %}
      {% do crumbs.insert(1, (url('collections.user', userpage), userpage)) %}
    {% endif %}
    {{ breadcrumbs(crumbs) }}
    <h2>{{ titles[filter.field] }}</h2>
  </header>
  <div class="featured listing">
    {{ addon_listing_header(base_url, filter.opts, filter.field,
                            show_unreviewed=False) }}
    <div class="featured-inner">
      {% cache collections.object_list %}
        {{ collection_listing_items(collections.object_list) }}
      {% endcache %}
    </div>
  </div>
</div>

<div class="secondary">
  <div class="other-categories highlight">
    <h3>{{ _('Collections') }}</h3>
    <ul>
      {% for key, title in filter.opts %}
        <li id="p-{{ key }}">
          <a href="{{ base_url|urlparams(sort=key) }}">{{ title }}</a>
        </li>
      {% endfor %}
    </ul>
    {% if request.user.is_authenticated() %}
      <ul>
        <li><a href="{{ url('collections.user', amo_user.username) }}">
          {{ _("Collections I've Made") }}</a></li>
        <li><a href="{{ url('collections.detail', amo_user.username, 'favorites') }}">
          {{ _("My Favorite Add-ons") }}</a></li>
      </ul>
    {% endif %}
  </div>

  <div>
    <h3>{{ _('Create a New Collection') }}</h3>
    <p>{% trans %}
      Collections make it easy to keep track of favorite add-ons and share your
      perfectly customized browser with others.
    {% endtrans %}</p>
    <a href="{{ url('collections.add') }}" class="button">
      {{ _('Create a Collection') }}</a>
  </div>

  <div>
    <h3>{{ _('Add-on Collector') }}</h3>
    <p>{% trans app=request.APP.pretty %}
      Get updates on watched collections or manage your own collections directly
      from {{ app }} with this add-on.
    {% endtrans %}</p>
    <a href="{{ remora_url('/pages/collector') }}" class="more-info">
      {{ _('Check out Add-on Collector') }}</a>
  </div>
</div>
{% endblock %}
