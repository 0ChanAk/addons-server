{% extends "editors/base.html" %}
{% block content %}
  <h2>{{ _('Add-on Editor Review Log', 'editorcp_reviewlog_page_heading') }}</h2>

  <div class="listing results"><div class="results-inner controls">
   	<div id="log-filter">
     	<form action="{{ url('editors.reviewlog') }}" method="get">
        <p class="date_range">
          {{ form.start.label_tag() }}
          {{ form.start }}
          {{ form.end.label_tag() }}
          {{ form.end }}
        </p><p>
          {# L10n: "Filter" is a button label (verb) #}
          <button type="submit">
            {{ _('Filter', 'editorcp_reviewlog_page_heading') }}
          </button>
        </p>
      </form>
   	</div><!-- #log-filter -->
    {% if pager.object_list %}
      <table id="log-listing">
        <thead>
          <tr>
            <th>{{ _('Date', 'editorcp_reviewlog_column_date') }}</th>
            <th>{{ _('Event') }}</th>
            <th>{{ _('Details') }}</th>
            <th>{{ _('Editor') }}</th>
            <th>{{ _('Action', 'editorcp_reviewlog_column_action') }}</th>
            <td></td>
          </tr>
        </thead>
        <tbody>
          {% for item in pager.object_list %}
            <tr>
              <td>{{ item.created|babel_datetime }}</td>
              <td>
                {{ item }}
              </td>
              <td>
                {% if item.arguments|count >= 2 %}
                <a href="{{ url('editors.review', item.arguments[1].id) }}">
                  {{ _('Details') }}
                </a>
                {% endif %}
              </td>
              <td>{{ item.user.display_name }}</td>
              <td>
                {% if item.details['reviewtype'] == 'nominated' %}
                  {{ NOM_DICT.get(item.action) }}
                {% elif item.details['reviewtype'] == 'pending' %}
                  {{ PEN_DICT[item.action] }}
                {% endif %}
              </td>
              <td>
                <a class="comments show" href="#">{{ _('Show Comments') }}</a>
                <a class="comments hide" href="#">{{ _('Hide Comments') }}</a>
              </td>
            </tr>
            <tr class="comments hide">
              <td colspan="5">{{ item.details['comments'] }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div><p>{{ _('No reviews found for this period.') }}</p></div>
    {% endif %}

    <div class="listing-footer">
      {{ pager|paginator }}
    </div>
</div></div>
{% endblock %}
