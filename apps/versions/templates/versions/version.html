{# addon, version, request #}
<div class="version {{ itemclass }}" id="version-{{ version.version }}">
  <div class="info">
    <h3><a href="{{ version.get_url_path() }}"
           title="{{ _('Permanent link to this version') }}">
      {{ _('Version {0}', 'addon_display_header_version')|f(version.version) }}</a>
      <span class="meta">
        <time datetime="{{ version.created|isotime }}">
          {# L10n: {0} is a timestamp, such as September 28, 2011. #}
          {{ _('Released {0}')|f(version.created|datetime) }}
        </time>
        {% if version.has_files %}
          <span class="filesize">
            {{ (version.all_files[0].size * 1024)|filesizeformat }}
          </span>
        {% endif %}
      </span>
      {% if version.compatible_apps %}
        <span class="meta">
          {# L10n: This refers to this version's compatible applications, such as Firefox 8.0 #}
          {{ _('Works with') }}
          {{ version.compatible_apps.values()|join(', ') }}
        </span>
      {% endif %}
    </h3>

    <div class="desc prose" {{ version.releasenotes|locale_html }}>
      {{ version.releasenotes|nl2br }}
    </div>

    {% if version.license %}
      {% set license = version.license %}
      <ul class="source">
        <li>
          {% if license.builtin %}
            {% trans name = license_link(license) %}
              Source code released under {{ name }}
            {% endtrans %}
          {% else %}
            {% trans url = version.license_url() %}
              Source code released under <a href="{{ url }}">Custom License</a>
            {% endtrans %}
          {% endif %}
        </li>
        <li>
          {# TODO: reverse URL #}
          <a href="{{ remora_url('/pages/faq#license') }}">
            {{ _("What's this?", 'addons_display_a_license_what') }}</a>
        </li>
        {% if addon.view_source and version.has_files and
              addon.status in amo.REVIEWED_STATUSES %}
          <li>
            <a class="source-code"
               href="{{ url('files.list', version.all_files[0].pk) }}">
              {{ _('View the source') }}</a>
          </li>
        {% endif %}
      </ul>
    {% endif %}

  </div>
  <div class="action">
    {{ install_button(addon, version=version, show_backup=False, impala=impala) }}
  </div>
  {% if show_versions_link and not addon.is_selfhosted() %}
    <p class="more">
      <a href="{{ url('addons.versions', addon.slug) }}">
        {{ _('See complete version history &raquo;') }}
      </a>
    </p>
  {% endif %}
</div>
